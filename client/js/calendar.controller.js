angular.module('mediaboxApp').controller('CalendarController',['$scope','$compile','CampaignCalendar','uiCalendarConfig',function($scope,$compile,CampaignCalendar,uiCalendarConfig){var date=new Date();var d=date.getDate();var m=date.getMonth();var y=date.getFullYear();$scope.changeTo='Hungarian';$scope.events=CampaignCalendar.query();$scope.eventsF=function(start,end,timezone,callback){var s=new Date(start).getTime()/1000;var e=new Date(end).getTime()/1000;var m=new Date(start).getMonth();var events=[{title:'Feed Me '+m,start:s+(50000),end:s+(100000),allDay:false,className:['customFeed']}];callback(events);};$scope.calEventsExt={color:'#f00',textColor:'yellow',events:$scope.events};$scope.alertOnEventClick=function(date,jsEvent,view){$scope.alertMessage=(date.title+' was clicked ');};$scope.alertOnDrop=function(event,delta,revertFunc,jsEvent,ui,view){$scope.alertMessage=('Event Droped to make dayDelta '+delta);};$scope.alertOnResize=function(event,delta,revertFunc,jsEvent,ui,view){$scope.alertMessage=('Event Resized to make dayDelta '+delta);};$scope.addRemoveEventSource=function(sources,source){var canAdd=0;angular.forEach(sources,function(value,key){if(sources[key]===source){sources.splice(key,1);canAdd=1;}});if(canAdd===0){sources.push(source);}};$scope.addEvent=function(){$scope.events.push({title:'Open Sesame',start:new Date(y,m,28),end:new Date(y,m,29),className:['openSesame']});};$scope.remove=function(index){$scope.events.splice(index,1);};$scope.changeView=function(view,calendar){uiCalendarConfig.calendars[calendar].fullCalendar('changeView',view);};$scope.renderCalender=function(calendar){if(uiCalendarConfig.calendars[calendar]){uiCalendarConfig.calendars[calendar].fullCalendar('render');}};$scope.eventRender=function(event,element,view){element.attr({'tooltip':event.title,'tooltip-append-to-body':true});$compile(element)($scope);};$scope.uiConfig={calendar:{height:450,editable:true,header:{left:'title',center:'',right:'today prev,next'},eventClick:$scope.alertOnEventClick,eventDrop:$scope.alertOnDrop,eventResize:$scope.alertOnResize,eventRender:$scope.eventRender}};$scope.changeLang=function(){if($scope.changeTo==='Hungarian'){$scope.uiConfig.calendar.dayNames=["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"];$scope.uiConfig.calendar.dayNamesShort=["Vas","Hét","Kedd","Sze","Csüt","Pén","Szo"];$scope.changeTo='English';}else{$scope.uiConfig.calendar.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];$scope.uiConfig.calendar.dayNamesShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];$scope.changeTo='Hungarian';}};$scope.eventSources=[$scope.events,$scope.eventSource,$scope.eventsF];$scope.eventSources2=[$scope.calEventsExt,$scope.eventsF,$scope.events];}]);